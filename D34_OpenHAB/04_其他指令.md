# 登入主控台

1. 登入

```bash
sudo openhab-cli console
```

2. 帳號預設為 `openhab`，密碼預設為 `habopen`；成功登入後將看到 Karaf Console。

```bash
habopen
```

3. 進入後，運行指令安裝 HTTP Action。

```bash
feature:install openhab-core-io-rest-voice;  
```

4. 確認是否安裝成功

```bash
feature:list | grep http;
```

5. 退出 Karaf Console；不用分號。

```bash
logout
```

## 安裝重要模組

_openhab-transport-http 和 openhab-core-io-transport-http_

1. 安裝 openhab-core-io-transport-http

```bash
feature:install openhab-core-io-transport-http;
```

2. 確認已成功安裝

```bash
feature:list | grep openhab-core-io-transport-http;
```

## 設定

1. 編輯設定文件

```bash
sudo nano /etc/openhab/services/addons.cfg
```

2. 檢查或修改 misc 設定，停用 upnp 功能

```bash
misc = none
```

3. 重啟 OpenHAB

```bash
sudo systemctl restart openhab.service
```

4. 進入主控台

```bash
sudo openhab-cli console
```

5. 檢查所有已啟用的 UPnP 模組

```bash
feature:list | grep -i upnp;
```

6. 卸載 UPnP 模組

```bash
feature:uninstall openhab-core-config-discovery-addon-upnp;
feature:uninstall openhab.tp-jupnp;
```

7. 確認哪些 UPnP Bundle 仍在運行

```bash
bundle:list | grep -i upnp;
```

8. 停止所查詢到的 UPnP Bundles

```bash
bundle:stop 267;
bundle:stop 268;
bundle:stop 269;
```

9. 停止後卸載

```bash
bundle:uninstall 267;
bundle:uninstall 268;
bundle:uninstall 269;
```

## 重載

1. 嘗試清除 OpenHAB 的緩存和臨時檔案，然後重新啟動

```bash
sudo systemctl stop openhab.service
sudo rm -rf /var/lib/openhab/cache/*
sudo rm -rf /var/lib/openhab/tmp/*
sudo systemctl start openhab.service
sudo journalctl -u openhab.service -f -n 30
```

2. 確認是否有其他服務或程式占用 UPnP

```bash
sudo netstat -tuln | grep 1900
```




