# 偽裝

_讓 OpenVPN 透過 SOCKS 代理伺服器來隱藏 VPN 連線的特徵，使它看起來像普通的 HTTPS 流量，進而減少被偵測的可能性。_

## 添加

1. 在 OpenVPN 客戶端 china.ovpn 添加

```bash
client
remote yourserver.com 443 tcp
socks-proxy 127.0.0.1 3128
```

## 確保 SOCKS 代理伺服器（Shadowsocks 或 Squid）運行

1. 如果你本機 (`127.0.0.1:3128`) 沒有運行 SOCKS 代理，請先架設 Shadowsocks 或 Squid Proxy，安裝 Shadowsocks 伺服器

    ```bash
    apt update && apt install shadowsocks-libev -y
    ```

2. 安裝 nano

```bash
apt update && apt install -y nano
```

3. 設定 `/etc/shadowsocks-libev/config.json`

```bash
nano /etc/shadowsocks-libev/config.json
```

4. 編輯內容，密碼是原本 config.json 裡的值，確保密碼與客戶端的配置一致，否則無法成功連接。

```json
{
    "server": "0.0.0.0",
    "server_port": 8388,
    "password": "pO6arQWxqKX1",
    "timeout": 300,
    "method": "aes-256-gcm",
    "mode": "tcp_and_udp"
}
```

5. 啟動 Shadowsocks

    ```bash
    systemctl restart shadowsocks-libev
    systemctl enable shadowsocks-libev
    ```


## Squid Proxy 設定

1. 安裝 Squid Proxy

    ```bash
    apt update && apt install squid -y
    ```

2. 編輯 `/etc/squid/squid.conf`

    ```bash
    nano /etc/squid/squid.conf
    ```

3. 貼上內容，允許本機存取。

    ```bash
    acl localnet src 192.168.1.0/24
    http_access allow localnet
    ```

4. 重啟 Squid

    ```bash
    systemctl restart squid
    ```


