# 新用戶預設環境

_在樹莓派中建立一個新的帳戶時，系統會根據 `/etc/skel` 目錄中的模板來建立新用戶的家目錄，對此目錄進行編輯也就是建立初始環境模板_

<br>

## 編輯設定檔

_編輯使用者的預設環境檔案_

<br>

1. 切換到設定檔案所在目錄。

    ```bash
    cd /etc/skel
    ```

<br>

2. 查看資料夾，可發現無可見文件，所以在前面步驟查詢新用戶家目錄時也是空無一物。

    ```bash
    ls
    ```

<br>

3. 近一步透過參數觀察，可發現目錄內有隱藏的 `預設設定文件`，檔案前綴 `.` 代表的就是 `隱藏檔案`。

    ```bash
    ls -al
    ```

    ![](images/img_601.png)

<br>

## 複製文件

1. 先切換到主帳號中，在這示範的主帳號是 `sam6238`。

    ```bash
    su <主帳號名稱>

    # 以 `sam6238` 為例
    su sam6238
    ```

<br>

2. 將主帳號 `sam6238` 家目錄中的文件全部複製到資料夾 `/etc/skel/` 中，參數 `-r` 代表遞迴複製；特別注意，因為主帳號也是新建立的，所以當前亦無任何資料，這樣的複製只是將資料夾重建在新用戶家目錄中。

    ```bash
    sudo cp -r /home/sam6238/* /etc/skel/
    ```

    ![](images/img_602.png)

<br>

## 實測

_建立新用戶_

<br>

1. 再次建立新用戶。

    ```bash
    sudo adduser <新用戶名稱>

    # 例如
    sudo adduser sam6240
    ```

    ![](images/img_603.png)

<br>

2. 查看家目錄，可以發現主帳號並無訪問其他新建用戶家目錄的權限。

    ```bash
    cd /home && tree
    ```

    ![](images/img_604.png)

<br>

3. 分別進入兩個新建帳號中進行查看，可確認其帳號專屬的資料與結構。

    ![](images/img_61.png)

<br>

## 關於家目錄權限

1. 特別說明，即便 `sam6238` 屬於 `sudo` 群組，新增用戶如 `sam6240` 的家目錄僅有該用戶本人可以進入及讀寫。

    ![](images/img_207.png)

<br>

2. 所以其他使用者如欲進入目錄會被系統阻擋。

    ![](images/img_208.png)

<br>

3. 其他使用者必須在具備 root 權限前提下，使用 root 權限才可進入其他使用者家目錄。

    ```bash
    sudo ls /home/sam6240
    ```

    ![](images/img_209.png)

<br>

4. 或切換為 root 再運行。

    ```bash
    sudo -i
    cd /home/sam6240
    ```

<br>

5. 另外，也可透過修改目錄權限來達到這個目的，但一般情況下不建議這樣做。

    ```bash
    sudo chmod o+x /home/sam6240
    ```

<br>

6. 再次嘗試會發現可以進入。

    ![](images/img_210.png)

<br>

___

_END_
