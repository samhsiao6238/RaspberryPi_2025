# 權限管理指令

<br>

## `sudo`

1. 以 root 權限執行指令。

    ```bash
    # 例如以超級用戶權限執行更新
    sudo apt update
    ```

<br>

2. 進入 root shell。

    ```bash
    sudo -i
    ```

<br>

3.  不建議用 sudo 執行圖形應用程式。

<br>

## `chmod`

1. 更改檔案權。

    ```bash
    # 給 `u 用戶` `+ 增加` `r 讀取` 權限
    chmod u+r file.txt

    # `- 移除` `g 群組` 的 `w 寫入` 權限
    chmod g-w file.txt

    # 給 `a 所有人` `+ 增加` `x 執行` 權限
    chmod a+x file.txt

    # 給 `用戶、群組、其他人` 設定權限為
    # `讀寫執行`、`讀取和執行`、`讀取和執行`
    chmod 755 file.txt
    ```

<br>

2. `chmod` 的參數說明。

    ```bash
    u：用戶 (user)
    g：群組 (group)
    o：其他人 (others)
    a：所有人 (all)
    r：讀取權限 (read)
    w：寫入權限 (write)
    x：執行權限 (execute)
    +：增加權限
    -：移除權限
    =：設置權限
    ```

<br>

3. 權限對應表。

    ```bash
    r = 4，w = 2，x = 1

    # 例如：chmod 755
    #   user   = rwx = 4+2+1 = 7
    #   group  = r-x = 4+0+1 = 5
    #   others = r-x = 4+0+1 = 5
    ```

<br>

4. 執行目錄權限。

    ```bash
    - r（read）   → 可列出目錄內容
    - w（write） → 可建立/刪除該目錄下的檔案
    - x（execute）→ 可進入該目錄（cd）
    ```

<br>

## `chown`

_注意使用者或群組需存在系統中，否則會失敗_

<br>

1. 更改檔案擁有者，語法結構如下。

    ```bash
    # <帳號>：新文件擁有者的使用者名稱
    # <群組>：新文件群組的名稱
    # <檔案>：要更改擁有者和群組的目標文件或目錄
    chown <帳號>:<群組> <檔案>
    ```

<br>

2. `chown` 使用範例。

    ```bash
    # 將 `file.txt` 的擁有者改為 `user1`，群組改為 `group1`
    chown user1:group1 file.txt

    # 將 `file.txt` 的擁有者改為 `user1`，群組保持不變
    chown user1 file.txt

    # 將 `file.txt` 的群組改為 `group1`，擁有者保持不變
    chown :group1 file.txt

    # 遞歸處理指定目錄 `directory` 及其所有子文件和子目錄
    # 將擁有者和群組改為 `user1:group1`
    chown -R user1:group1 directory/

    # 新建檔案並指定擁有者為 user1:group1
    touch newfile.txt && chown user1:group1 newfile.txt
    ```

<br>

## `chgrp`

1. 修改檔案或目錄的群組。

    ```bash
    chgrp group1 file.txt
    ```

<br>

## `umask`

1. 控制新檔案或目錄的預設權限；預設新檔案權限為 `666 - umask`、預設新目錄權限為 `777 - umask`。

    ```bash
    # 顯示目前的 umask 設定
    umask

    # 修改 umask（只影響當前 shell）
    umask 0002
    ```

<br>

## `stat`

1. 顯示檔案的詳細資訊，包括權限、link 數、大小與時間等。

    ```bash
    stat file.txt
    ```

<br>

___

_END_