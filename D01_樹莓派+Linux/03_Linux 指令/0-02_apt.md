# apt

_就是 `Advanced Package Tool` 的縮寫，在樹莓派系統中可使用 `apt` 進行應用程式與套件的安裝、更新與移除；`apt` 會從設定好的軟體倉庫來源中下載與管理套件，確保依賴關係正確無誤。_

## 套件與應用程式

_若要精準描述，使用 `apt` 所安裝的是 `套件`，而有些套件是完整可執行的 `應用程式`，有些只是 `依賴元件`，不是讓使用者用來直接操作的；換句話說，套件是 `技術層級` 的單位，而應用程式是對使用者來說可直些運行的工具。_

1. 套件：package，這會是一個壓縮檔案，內含程式、說明文件、依賴資訊，可使用 `apt` 指令進行安裝；例如 `git`、`nginx` 等。

2. 應用程式：application，是實際可操作的程式，可由一個或多個套件組成；例如瀏覽器 `chromium`、圖形介面工具 `gimp` 等。

## 基本操作

1. 更新本機可用套件的清單，確保下載的是最新版。

    ```bash
    sudo apt update
    ```

2. 安裝套件

    ```bash
    sudo apt install <套件名稱>
    ```


3. 移除套件

    ```bash
    sudo apt remove <套件名稱>
    ```

4. 清除不再需要的套件

    ```bash
    sudo apt autoremove
    ```

以下是針對 `apt` 套件管理相關主題的簡明說明：



## 套件來源清單

_`sources.list`_

1. 這是 `apt` 用來查找套件的設定檔案，通常位置在 `/etc/apt/sources.list` 或 `/etc/apt/sources.list.d/` 資料夾中。
* 檔案中列出各個軟體倉庫的網址（repository URL），像是：

  ```
  deb http://deb.debian.org/debian bookworm main
  ```
* 你可以透過編輯這些內容來加入其他來源（例如第三方軟體或 Raspberry Pi 官方專屬倉庫）。



### 2️⃣ GPG Key（套件簽章金鑰）

* 所有從 repository 安裝的套件都會被簽章（簽名）以防止被竄改。
* `GPG key` 是用來驗證這些簽章是否合法的公鑰。
* 如果套件來源缺少對應的 GPG key，會出現類似：

  ```
  NO_PUBKEY XXXXXXXX
  ```

  此時需要手動匯入對應的金鑰才能讓 `apt` 信任該來源。



### 3️⃣ 升級策略（Upgrade Policy）

* 常見的升級指令：

  * `sudo apt upgrade`：升級現有已安裝套件，但不會移除或新增依賴。
  * `sudo apt full-upgrade`（或舊稱 `dist-upgrade`）：會根據需要新增或移除套件以完成升級。
* 在樹莓派上，建議：

  * 平常使用 `apt upgrade` 較安全；
  * 有重大更新或版本變動時再使用 `full-upgrade`。



若需延伸到如何使用 `apt-mark hold` 或穩定版與測試版來源切換，可再告訴我。

